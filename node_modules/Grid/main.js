/* jshint esversion:6, node:true, undef: true, unused: true, sub:true */
/* exported Grid */
"use strict";

function Grid(w,h){
  this.w = w;
  this.h = h;
  let d = this.data = [];
  if(w*h <= 0) return;
  for(var x=0;x<w*h;x++) d[x] = null;
}

Grid.prototype.inbound = function(p){
  if(p.x < 0) return false;
  if(p.y < 0) return false;
  if(p.x >= this.w) return false;
  if(p.y >= this.h) return false;
  return true;
};

Grid.prototype.set = function(p,v){ this.data[p.y*this.w+p.x] = v; };

Grid.prototype.get = function(p){ return this.data[p.y*this.w+p.x]; };

Grid.prototype.each = function(f){
  let w = this.w;
  let h = this.h;
  let d = this.data;
  let off = 0;
  for(var y=0;y<h;y++)
    for(var x=0;x<w;x++){
      d[off] = f({x:x,y:y},d[off]);
      off++;
    }
  return this;
};

Grid.prototype.fill = function(v){
  if(typeof v == "function") return this.each(v);
  let d = this.data;
  for(var i=0;i<d.length;i++) d[i] = v;
  return this;
};

module.exports = Grid;
